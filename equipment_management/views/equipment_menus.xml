<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ========================= -->
    <!--          MENUS           -->
    <!-- ========================= -->

    <!-- Root -->
    <menuitem id="menu_equipment_root"
              name="Equipment"
              sequence="45"
              web_icon="equipment_management,static/description/icon.png"
              groups="equipment_management.group_equipment_user"/>

    <!-- Top-level submenus -->
    <menuitem id="menu_equipment_equipment"
              name="Equipment"
              parent="menu_equipment_root"
              action="action_equipment_item"
              sequence="10"
              groups="equipment_management.group_equipment_user"/>

    <menuitem id="menu_equipment_loans"
              name="Loans"
              parent="menu_equipment_root"
              sequence="20"
              groups="equipment_management.group_equipment_user"/>

    <menuitem id="menu_equipment_config"
              name="Configuration"
              parent="menu_equipment_root"
              sequence="90"
              groups="equipment_management.group_equipment_manager"/>



    <!-- Loans -> All / My / Overdue -->
    <menuitem id="menu_equipment_loan_all"
              name="All Loans"
              parent="menu_equipment_loans"
              sequence="10"
              action="action_equipment_loan"
              groups="equipment_management.group_equipment_user"/>

    <menuitem id="menu_equipment_loan_my"
              name="My Loans"
              parent="menu_equipment_loans"
              sequence="20"
              action="action_my_equipment_loans"
              groups="equipment_management.group_equipment_user"/>

    <menuitem id="menu_equipment_loan_overdue"
              name="Overdue"
              parent="menu_equipment_loans"
              sequence="30"
              action="action_overdue_loans"
              groups="equipment_management.group_equipment_user"/>

    <!-- Configuration -> Categories / Locations -->
    <menuitem id="menu_equipment_config_categories"
              name="Categories"
              parent="menu_equipment_config"
              sequence="10"
              action="action_equipment_category"
              groups="equipment_management.group_equipment_manager"/>

    <menuitem id="menu_equipment_config_locations"
              name="Locations"
              parent="menu_equipment_config"
              sequence="20"
              action="action_equipment_location"
              groups="equipment_management.group_equipment_manager"/>

    <!-- ========================= -->
    <!--         ACTIONS           -->
    <!-- ========================= -->

    <!-- Items -->
    <record id="action_equipment_item" model="ir.actions.act_window">
        <field name="name">Equipment Items</field>
        <field name="res_model">equipment.item</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add your first equipment item
            </p>
            <p>Items represent physical equipment you can loan, track, and maintain.</p>
        </field>
    </record>

    <!-- Loans (the missing one referenced by the menu) -->
    <record id="action_equipment_loan" model="ir.actions.act_window">
        <field name="name">Equipment Loans</field>
        <field name="res_model">equipment.loan</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first loan
            </p>
            <p>Loans track the borrowing and returning of equipment.</p>
        </field>
    </record>

    <!-- If these two actions are already defined in equipment_loan_views.xml,
         keep them there and remove the duplicates below. Otherwise, keep them here. -->

    <record id="action_my_equipment_loans" model="ir.actions.act_window">
        <field name="name">My Loans</field>
        <field name="res_model">equipment.loan</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="context">{'search_default_my_loans': 1, 'search_default_issued': 1}</field>
        <field name="domain">[('borrower_id', '=', uid)]</field>
    </record>

    <record id="action_overdue_loans" model="ir.actions.act_window">
        <field name="name">Overdue Loans</field>
        <field name="res_model">equipment.loan</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="context">{'search_default_overdue': 1}</field>
        <field name="domain">[('state', '=', 'overdue')]</field>
    </record>

    <!-- Categories -->
    <record id="action_equipment_category" model="ir.actions.act_window">
        <field name="name">Equipment Categories</field>
        <field name="res_model">equipment.category</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add your first category
            </p>
            <p>Categories help organize equipment by type or usage.</p>
        </field>
    </record>

    <!-- Locations -->
    <record id="action_equipment_location" model="ir.actions.act_window">
        <field name="name">Equipment Locations</field>
        <field name="res_model">equipment.location</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add your first location
            </p>
            <p>Locations help track where equipment is stored or used.</p>
        </field>
    </record>

</odoo>
